<?xml version="1.0" encoding="UTF-8"?>
<project name="Spiffy UI Framework Application" xmlns:ivy="antlib:org.apache.ivy.ant" default="all" basedir=".">

    <target name="setup">
        <condition property="build.base" value="${env.SPIFFY_BASE}" else="${basedir}">
          <isset property="${env.SPIFFY_BASE}"/>
        </condition>
    </target>
    
    <target name="all" description="Build, compile, and package the entire application" depends="setup">
        <subant antfile="build.xml" buildpath="${build.base}/spiffyui-app/" />
    </target>
    
    <target name="app" description="Build, compile, and package just the Spiffy UI application" depends="setup">
        <subant antfile="build.xml" buildpath="${build.base}/spiffyui-app/" target="app" />
    </target>
    
    <target name="clean" description="Remove the artifacts generated by this build" depends="setup">
        <subant antfile="build.xml" buildpath="${build.base}/spiffyui-app/" target="clean" />
    </target>

    <target name="deploy-snapshot" description="Deploy project artifacts to the Sonatype snapshot repository" depends="setup">
        <subant antfile="build.xml" buildpath="${build.base}/spiffyui/build/build.xml" target="deploy-snapshot"/>
    </target>
    
    <target name="install-snapshot" description="Install project artifacts to the local repository" depends="setup">
        <subant antfile="build.xml" buildpath="${build.base}/spiffyui/build/build.xml" target="install-snapshot"/>
    </target>

    <target name="deploy-staging" description="Sign and Deploy artifacts to the spiffyui Sonatype release staging repository, ready for maven central syncing" depends="setup">
        <subant antfile="build.xml" buildpath="${build.base}/spiffyui/build/build.xml" target="deploy-staging"/>
    </target>
    
    <target name="run" description="Run the Spiffy sample project with an embedded Jetty server" depends="setup">
        <subant antfile="build.xml" buildpath="${build.base}/spiffyui-app/" target="run" />
    </target>
    
    <target name="clearcache" description="Clear the Apache Ivy cache" depends="setup">
        <subant antfile="build.xml" buildpath="${build.base}/spiffyui-app/" target="clearcache" />
        <subant antfile="build.xml" buildpath="${build.base}/spiffyui/build" target="clearcache" />
    </target>
    
    <target name="package-appengine" depends="setup" description="Expand the war and add the configuration files for deploying to Google App Engine">
        <subant antfile="build.xml" buildpath="${build.base}/spiffyui-app/" target="package-appengine" />
    </target>
    
    <target name="package-appengine-staging" depends="setup" description="Expand the war and add the configuration files for deploying to spiffyui-staging.appspot.com">
        <subant antfile="build.xml" buildpath="${build.base}/spiffyui-app/" target="package-appengine-staging" />
    </target>
</project>
